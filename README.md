# ğŸ­ Agentic AI Incident Analysis System

## ğŸ“Œ Overview
This project implements an **AI-powered Incident Analysis System** for a manufacturing plant.  
It integrates **IoT sensor data** with a **retrieval-augmented generation (RAG) pipeline** to assist maintenance teams by:

- Collecting structured incident data from IoT sensors / central control systems.  
- Storing past incidents in a **FAISS vector database** for efficient similarity search.  
- Using **LLM reasoning (mistralai/mistral-7b-instruct-v0.3 via LM Studio)** to analyze new incidents against historical data.  
- Providing structured recommendations such as:
  - Potential **risk level**
  - Likely **root cause(s)**
  - Suggested **remedial actions**
  - **Prevention advice**  

The system exposes functionality via:

- **FastAPI REST API** (for ingestion & analysis)  
- **WebSocket / UI layer** (for real-time updates to operators)  
- **Streamlit client** (simple web interface for viewing AI recommendations)  

---

## ğŸ› ï¸ Project Structure

```bash
Agentic-AI-System/
â”‚â”€â”€ API/
â”‚ â””â”€â”€ app.py # FastAPI app
â”‚
â”‚â”€â”€ query/
â”‚ â”œâ”€â”€ build_index.py # Build FAISS index from incidents
â”‚ â”œâ”€â”€ query_new.py # Query logic
â”‚ â””â”€â”€ prompt_logic.py # LLM + Prompt orchestration
â”‚
â”‚â”€â”€ UI/
â”‚ â”œâ”€â”€ client_ws.py # WebSocket / API client
â”‚ â””â”€â”€ streamlit_ui.py # Streamlit UI (optional)
â”‚
â”‚â”€â”€ data/
â”‚ â”œâ”€â”€ past_incidents.json # Dataset of 100 past incidents
â”‚ â””â”€â”€ storage/ # FAISS vector DB storage
â”‚
â”‚â”€â”€ docs/
â”‚ â”œâ”€â”€ ArchitectureDiagram.png
â”‚ â””â”€â”€ Project_Report.docx
â”‚
â”‚â”€â”€ requirements.txt
â”‚â”€â”€ README.md
```


---

## âš¡ Setup Instructions

### 1ï¸âƒ£ Clone Repository
```bash
git clone https://github.com/<your-username>/Agentic-AI-System.git
cd Agentic-AI-System
```

### 2ï¸âƒ£ Install Dependencies
```bash
pip install -r requirements.txt
```

### 3ï¸âƒ£ Build Vector Index
```bash
python query/build_index.py
```

### 4ï¸âƒ£ Run FastAPI Service
```bash
uvicorn API.app:app --reload
```

API will be available at:
ğŸ‘‰ http://127.0.0.1:8000

## ğŸ“¡ Usage
### âœ… REST API

Send a new incident JSON (updated schema):
```bash
{
  "new_incident": {
    "incident_id": "AUTO-INC-002",
    "machine": "Filler Line B",
    "timestamp": "2025-08-18T09:45:00Z",
    "type": "ConveyorJam",
    "measured_value": null,
    "threshold": null,
    "status": "emergency_stop"
  }
}
```

Example call:
```bash
curl -X POST "http://127.0.0.1:8000/analyze_incident/" \
     -H "Content-Type: application/json" \
     -d @sample_incident.json
```

## ğŸ“Š Example Output
```bash
Incident: AUTO-INC-002 | Machine: Filler Line B | Type: ConveyorJam

Risk Level: High

Possible Root Cause(s):
- Misaligned guide rail
- Loose hose connection

Recommended Action(s):
- Adjust the misaligned guide rail
- Tighten loose hose connections
- Clean up any spillage and perform safety checks

Relevant Past Incidents Count: 2
```
## ğŸ“ Architecture
### ğŸ“ Assumptions & Schema

Incidents are generated by IoT sensors on machines.

A central control system converts sensor alerts into structured JSON.

Only incidents (alerts exceeding thresholds or causing shutdowns) are forwarded.

JSON Schema:
```bash
{
  "new_incident": {
    "incident_id": "string",
    "machine": "string",
    "timestamp": "ISO8601 string",
    "type": "string",
    "measured_value": "number | null",
    "threshold": "number | null",
    "status": "string"
  }
}
```
